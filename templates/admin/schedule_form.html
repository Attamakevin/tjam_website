{% extends "admin/base.html" %}

{% block title %}{{ 'Edit' if schedule else 'Add' }} Schedule - Admin{% endblock %}

{% block content %}
<div class="container-fluid">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('admin_schedules') }}">Schedules</a></li>
            <li class="breadcrumb-item active">{{ 'Edit' if schedule else 'Add' }} Schedule</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">{{ 'Edit' if schedule else 'Add New' }} Schedule Item</h5>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <div class="mb-3">
                            <label for="title" class="form-label">Title *</label>
                            <input type="text" class="form-control" id="title" name="title" 
                                   value="{{ schedule.title if schedule else '' }}" required>
                        </div>

                        <div class="mb-3">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" name="description" 
                                      rows="3">{{ schedule.description if schedule else '' }}</textarea>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="start_time" class="form-label">Start Time *</label>
                                    <input type="time" class="form-control" id="start_time" name="start_time" 
                                           value="{{ schedule.start_time.strftime('%H:%M') if schedule else '' }}" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="end_time" class="form-label">End Time *</label>
                                    <input type="time" class="form-control" id="end_time" name="end_time" 
                                           value="{{ schedule.end_time.strftime('%H:%M') if schedule else '' }}" required>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="day_of_week" class="form-label">Day of Week</label>
                            <select class="form-select" id="day_of_week" name="day_of_week">
                                <option value="" {{ 'selected' if schedule and schedule.day_of_week is none else '' }}>
                                    Daily (All Days)
                                </option>
                                <option value="0" {{ 'selected' if schedule and schedule.day_of_week == 0 else '' }}>Monday</option>
                                <option value="1" {{ 'selected' if schedule and schedule.day_of_week == 1 else '' }}>Tuesday</option>
                                <option value="2" {{ 'selected' if schedule and schedule.day_of_week == 2 else '' }}>Wednesday</option>
                                <option value="3" {{ 'selected' if schedule and schedule.day_of_week == 3 else '' }}>Thursday</option>
                                <option value="4" {{ 'selected' if schedule and schedule.day_of_week == 4 else '' }}>Friday</option>
                                <option value="5" {{ 'selected' if schedule and schedule.day_of_week == 5 else '' }}>Saturday</option>
                                <option value="6" {{ 'selected' if schedule and schedule.day_of_week == 6 else '' }}>Sunday</option>
                            </select>
                            <div class="form-text">Leave as "Daily" to show this schedule every day</div>
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="is_active" name="is_active"
                                       {{ 'checked' if not schedule or schedule.is_active else '' }}>
                                <label class="form-check-label" for="is_active">
                                    Active
                                </label>
                                <div class="form-text">Uncheck to hide this schedule item</div>
                            </div>
                        </div>

                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-1"></i>{{ 'Update' if schedule else 'Create' }} Schedule
                            </button>
                            <a href="{{ url_for('admin_schedules') }}" class="btn btn-secondary">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card">
                <div class="card-header">
                    <h6 class="mb-0">Schedule Tips</h6>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="fas fa-clock text-primary me-2"></i>
                            Use 24-hour format for times
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-calendar text-primary me-2"></i>
                            Set to "Daily" for recurring events
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-eye text-primary me-2"></i>
                            Inactive items won't show on the public page
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-info-circle text-primary me-2"></i>
                            End time can be next day (e.g., 22:00 to 06:00)
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}